{% extends "base.html" %}
{% block title %} {{note_title}} {% endblock %}
{% block head %}
		{{ super() }}
		<style type="text/css">
				{{extra_css}}
		</style>
		<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/clockwise.css') }}"> -->
		<script>
				{% autoescape false %}
				{{extra_js}}
				{% endautoescape %}

		</script>

{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <div class="row justify-content-between">
                <div class="col-8">
                    <div class="title float-start">
                        <i class="fa-solid fa-list"></i>
						<h1>{{ gettext("Clusters status") }}</h1>
					</div>
				</div>
			</div>
		</div>

		<div class="row single_cluster">
			<div class="col">
				{% for cluster_name in all_clusters %}
					{% set cluster = all_clusters[cluster_name] %}
					<table class="table table-striped table-hover table-responsive" id="search_table">
						<thead>
							<tr>
								<th colspan="2">{{ gettext("%s cluster" % (cluster_name,)) }}</th>
							</tr>
						</thead>
						<tbody>
							{% if cluster['job_dates'] %}
								<tr>
									<td>{{ gettext("Oldest job edition") }}</td>
									<td>
										{# Date formatted as in jobs/search page #}
										{% if "date_format" in web_settings and web_settings["date_format"] == "words" %}
											<span data-livestamp="{{cluster['job_dates']['min']|float}}"></span>
										{% else %}
											{{ cluster['job_dates']['min']|format_date(web_settings["date_format"], web_settings["time_format"]) }}
										{% endif %}
									</td>
								</tr>
								<tr>
									<td>{{ gettext("Latest job edition") }}</td>
									<td>
										{# Date formatted as in jobs/search page #}
										{% if "date_format" in web_settings and web_settings["date_format"] == "words" %}
											<span data-livestamp="{{cluster['job_dates']['max']|float}}"></span>
										{% else %}
											{{ cluster['job_dates']['max']|format_date(web_settings["date_format"], web_settings["time_format"]) }}
										{% endif %}
									</td>
								</tr>
							{% endif %}
							{% if cluster['node_dates'] %}
								<tr>
									<td>{{ gettext("Oldest node edition") }}</td>
									<td>
										{# Date formatted as in jobs/search page #}
										{% if "date_format" in web_settings and web_settings["date_format"] == "words" %}
											<span data-livestamp="{{cluster['node_dates']['min']|float}}"></span>
										{% else %}
											{{ cluster['node_dates']['min']|format_date(web_settings["date_format"], web_settings["time_format"]) }}
										{% endif %}
									</td>
								</tr>
								<tr>
									<td>{{ gettext("Latest node edition") }}</td>
									<td>
										{# Date formatted as in jobs/search page #}
										{% if "date_format" in web_settings and web_settings["date_format"] == "words" %}
											<span data-livestamp="{{cluster['node_dates']['max']|float}}"></span>
										{% else %}
											{{ cluster['node_dates']['max']|format_date(web_settings["date_format"], web_settings["time_format"]) }}
										{% endif %}
									</td>
								</tr>
							{% endif %}
							<tr>
								<td>Latest error</td>
								<td>&nbsp;</td>
							</tr>
						</tbody>
					</table>
				{% endfor %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
